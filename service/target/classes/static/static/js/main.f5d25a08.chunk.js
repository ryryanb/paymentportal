(this.webpackJsonptpb=this.webpackJsonptpb||[]).push([[0],{110:function(e,t,a){},111:function(e,t,a){},212:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),c=a.n(s),o=a(16),i=(a(109),a(110),a(111),a(13)),l=a(226),d=a(225),j=a(14),u=a.n(j),b=a(18),h=a(23),m=a(21),O=a(10),p=a(98),x=a(224),f=a(218),g=a(219),w={apiUrl:"",webroot:"psbbiller"},v=a(1);function y(e){var t=e.setToken,a=Object(n.useState)({username:"",password:""}),r=Object(O.a)(a,2),s=r[0],c=r[1],l=Object(n.useState)(""),d=Object(O.a)(l,2),j=d[0],y=d[1],N=Object(i.g)(),P=Object(n.useState)(!1),C=Object(O.a)(P,2),k=C[0],S=C[1],T=function(e){var t=e.target,a=t.id,n=t.value;c((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(h.a)({},a,n))}))},L=function(){var e=Object(b.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),y(""),S(!0),fetch(w.apiUrl+"/authenticate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){t(e.details.token),e.details.forceChangePassword&&!0===e.details.forceChangePassword?N.push("/change-password"):N.push("/payment")})).catch((function(e){S(!1),e.text?e.text().then((function(e){y(e)})):y("login Error")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(p.a,{md:{span:3,offset:3},className:"page-inner",children:[Object(v.jsx)("h3",{children:"Login"}),Object(v.jsxs)(x.a,{onSubmit:L,children:[Object(v.jsxs)(x.a.Group,{controlId:"username",children:[Object(v.jsx)(x.a.Label,{children:"User"}),Object(v.jsx)(x.a.Control,{type:"text",name:"username",placeholder:"Enter user",value:s.username,onChange:T})]}),Object(v.jsxs)(x.a.Group,{controlId:"password",children:[Object(v.jsx)(x.a.Label,{children:"Password"}),Object(v.jsx)(x.a.Control,{type:"password",name:"password",placeholder:"Enter password",value:s.password,onChange:T})]}),""!==j&&Object(v.jsx)("div",{className:"text-danger",children:j}),!0===k?Object(v.jsxs)(f.a,{variant:"primary",block:!0,disabled:!0,children:[Object(v.jsx)(g.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(v.jsx)(f.a,{variant:"primary",type:"submit",block:!0,children:"Submit"}),Object(v.jsx)("div",{className:"forgot-pass text-right",children:Object(v.jsx)(o.b,{to:"/forgot-password",children:"Forgot Password"})}),Object(v.jsx)("div",{className:"enrollment text-right",children:Object(v.jsx)(o.b,{to:"/enrollment",children:"Enrollment"})})]})]})}var N=a(227),P=a(99),C=Object(n.forwardRef)((function(e,t){var a=e.children,s=Object(n.useRef)({}),c=function(){var e={};return Object.values(s.current).forEach((function(t){var a=t.validate();e=Object.assign(e,a)})),e};Object(n.useImperativeHandle)(t,(function(){return{validate:c}}),[]);return function e(t){if(s.current={},!t)return t;var a=typeof t;return"boolean"===a||"string"===a||"number"===a?t:r.a.Children.map(t,(function(t){if(!r.a.isValidElement(t))return t;if(t&&t.type===k)return r.a.cloneElement(t,{ref:(n=t,function(e){e?s.current[n.props.name]=e:Reflect.deleteProperty(s.current,n.props.name)})});if(t.props.children){var a=e(t.props.children);return 0===a.length?t:(1===a.length&&(a=a[0]),r.a.cloneElement(t,{},a))}var n;return t}))}(a)})),k=Object(n.forwardRef)((function(e,t){var a=e.name,r=e.value,s=e.validations,c=void 0===s?[]:s,o=e.onValidate,i=void 0===o?function(){}:o,l=e.children,d=Object(n.useRef)(r);Object(n.useEffect)((function(){u(d.current,r)&&(d.current=r,j())})),Object(n.useImperativeHandle)(t,(function(){return{validate:j}}));var j=function(){var e,t={},n=Object(P.a)(c);try{for(n.s();!(e=n.n()).done;){var s=e.value;if(t[a]=s(r),t[a])break}}catch(o){n.e(o)}finally{n.f()}return i(t),t},u=function(e,t){return Array.isArray(e)?e.length!==t.length:e!==t};return l})),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Value is required";return function(t){return Boolean(t)?"":e}},T=function(){return{address:"",companyName:"",contactName:"",email:"",url:"",generatePassword:!1,login:"",mustChangePassword:!1,password:"",confirmPassword:"",phone:"",sendAccountInfo:!1}},L=function(e,t){var a={};return a[t.name]=t.value,Object.assign({},e,a)},A=function(e,t){return Object.assign({},e,t)};function D(){var e=Object(n.useRef)(null),t=Object(n.useReducer)(L,{},T),a=Object(O.a)(t,2),r=a[0],s=a[1],c=Object(n.useReducer)(A,{}),i=Object(O.a)(c,2),l=i[0],d=i[1],j=Object(n.useState)(!1),h=Object(O.a)(j,2),m=h[0],y=h[1],P=Object(n.useState)(""),D=Object(O.a)(P,2),I=D[0],F=D[1],E=Object(n.useState)(""),q=Object(O.a)(E,2),G=q[0],B=q[1],R=function(e){s({name:e.target.name,value:e.target.value})},U=function(e){var t=e.target,a=t.name,n=t.checked;"generatePassword"===a&&!0===n&&(s({name:"password",value:""}),s({name:"confirmPassword",value:""})),s({name:a,value:n})},V=function(e){d(e)},M=function(){var t=Object(b.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),n=e.current.validate(),!0===J(n)&&(y(!0),F(""),fetch(w.apiUrl+"/user/enroll",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){e.code&&200===e.code?(console.log("enroll successful"),B(e.message)):(y(!1),e.message?F(e.message):F("can not enroll user")),console.log(e)})).catch((function(e){y(!1),F(e.message)})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),J=function(e){return!Object.values(e).some((function(e){return null!==e&&""!==e}))};return Object(v.jsx)(p.a,{md:{span:5,offset:3},className:"page-inner",children:""===G?Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:"Enrollment"}),Object(v.jsxs)(x.a,{onSubmit:M,children:[Object(v.jsxs)(C,{ref:e,children:[Object(v.jsxs)(N.a,{children:[Object(v.jsx)(N.a.Header,{as:"h5",children:"Information"}),Object(v.jsxs)(N.a.Body,{children:[Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Login"}),Object(v.jsx)(k,{name:"login",value:r.login,validations:[S("Login is required")],onValidate:V,children:Object(v.jsx)(x.a.Control,{type:"text",name:"login",value:r.login,onChange:R})}),l.login&&Object(v.jsx)("span",{className:"error text-danger",children:l.login})]}),Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Company name"}),Object(v.jsx)(k,{name:"companyName",value:r.companyName,validations:[S("Company name is required")],onValidate:V,children:Object(v.jsx)(x.a.Control,{type:"text",name:"companyName",value:r.companyName,onChange:R})}),l.companyName&&Object(v.jsx)("span",{className:"error text-danger",children:l.companyName})]}),Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Address"}),Object(v.jsx)(k,{name:"address",value:r.address,validations:[S("Address is required")],onValidate:V,children:Object(v.jsx)(x.a.Control,{type:"text",name:"address",value:r.address,onChange:R})}),l.address&&Object(v.jsx)("span",{className:"error text-danger",children:l.address})]}),Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Contact name"}),Object(v.jsx)(k,{name:"contactName",value:r.contactName,validations:[S("Contact name is required")],onValidate:V,children:Object(v.jsx)(x.a.Control,{type:"text",name:"contactName",value:r.contactName,onChange:R})}),l.contactName&&Object(v.jsx)("span",{className:"error text-danger",children:l.contactName})]}),Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Email"}),Object(v.jsx)(k,{name:"email",value:r.email,validations:[S("Email is required"),function(e){return/\S+@\S+\.\S+/.test(e)?"":"Invalid email"}],onValidate:V,children:Object(v.jsx)(x.a.Control,{type:"text",name:"email",value:r.email,onChange:R})}),l.email&&Object(v.jsx)("span",{className:"error text-danger",children:l.email})]}),Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Phone"}),Object(v.jsx)(k,{name:"phone",value:r.phone,validations:[S("Phone is required"),function(e){return isNaN(e.trim())?"Value should be number":""}],onValidate:V,children:Object(v.jsx)(x.a.Control,{type:"text",name:"phone",value:r.phone,onChange:R})}),l.phone&&Object(v.jsx)("span",{className:"error text-danger",children:l.phone})]}),Object(v.jsxs)(x.a.Group,{children:[Object(v.jsx)(x.a.Label,{children:"URL"}),Object(v.jsx)(x.a.Control,{type:"text",name:"url",value:r.url,onChange:R})]})]})]}),Object(v.jsxs)(N.a,{className:"mt-3",children:[Object(v.jsx)(N.a.Header,{as:"h5",children:"Authentication"}),Object(v.jsxs)(N.a.Body,{children:[Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Password"}),Object(v.jsxs)(k,{name:"password",value:r.password,validations:[function(e){return!1===r.generatePassword?""===e?"Password is required":e.length<8?"Password must be at least 8 characters long":"":""}],onValidate:V,children:[Object(v.jsx)(x.a.Control,{type:"password",name:"password",placeholder:"Password",value:r.password,onChange:R,readOnly:r.generatePassword}),Object(v.jsx)(x.a.Text,{className:"text-muted",children:"Must be at least 8 characters long."})]}),l.password&&Object(v.jsx)("span",{className:"error text-danger",children:l.password})]}),Object(v.jsxs)(x.a.Group,{className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Confirmation"}),Object(v.jsx)(k,{name:"confirmPassword",value:r.confirmPassword,validations:[function(e){return!1===r.generatePassword?""===e?"Confirm password is required":e!==r.password?"Password is not match":"":""}],onValidate:V,children:Object(v.jsx)(x.a.Control,{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:R,placeholder:"Confirm Password",readOnly:r.generatePassword})}),l.confirmPassword&&Object(v.jsx)("span",{className:"error text-danger",children:l.confirmPassword})]}),Object(v.jsx)(x.a.Group,{children:Object(v.jsx)(x.a.Check,{type:"checkbox",name:"generatePassword",label:"Generate Password",onChange:U})}),Object(v.jsx)(x.a.Group,{children:Object(v.jsx)(x.a.Check,{type:"checkbox",name:"mustChangePassword",label:"Must change password at next logon",value:r.mustChangePassword,onChange:U})})]})]}),Object(v.jsx)(x.a.Group,{className:"pt-2",children:Object(v.jsx)(x.a.Check,{type:"checkbox",name:"sendAccountInfo",label:"Send account information to the user",value:r.sendAccountInfo,onChange:U})})]}),""!==I&&Object(v.jsx)("div",{className:"error text-danger",children:I}),!0===m?Object(v.jsxs)(f.a,{variant:"primary",block:!0,disabled:!0,children:[Object(v.jsx)(g.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(v.jsx)(f.a,{variant:"primary",type:"submit",className:"mt-3",block:!0,children:"Submit"})]})]}):Object(v.jsxs)("div",{children:[" ",G,!0===r.generatePassword&&!0===r.sendAccountInfo&&Object(v.jsx)("p",{children:"New password and Account information are sent to the registration email."}),!0===r.generatePassword&&!1===r.sendAccountInfo&&Object(v.jsx)("p",{children:"New password is sent to the registration email."}),!0===r.sendAccountInfo&&!1===r.generatePassword&&Object(v.jsx)("p",{children:"Account information is sent to the registration email."}),Object(v.jsx)("p",{children:Object(v.jsx)(o.b,{to:"/login",children:"Login"})})]})})}var I=a(220),F=a(223),E=a(221),q=a(222),G=a(68),B=a.n(G),R=a(100),U=a(101),V=a.n(U);function M(){var e=Object(n.useState)(localStorage.getItem("token")),t=Object(O.a)(e,2),a=t[0],r=t[1];return{setToken:function(e){localStorage.setItem("token",e),r(e)},token:a}}var J="",z={logout:function(){localStorage.clear(),window.location="/"+w.webroot},print:function(e){if("object"==typeof J)try{J.close()}catch(t){console.log(t.message)}return(J=window.open("","print","height=600,width=900,scrollbars=yes,resizable=yes")).document.write("<html><head><title>Print</title>"),J.document.write('<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous" />'),J.document.write('</head><body style="background-color:#FFFFFF; background: #FFFFFF;">'),J.document.write('<button class="btn btn-danger" onclick="window.close();">&nbsp;&nbsp;Close&nbsp;&nbsp;&nbsp;</button></div>'),J.document.write('<div><center><img src="/'+w.webroot+'/images/blue_logo.svg" width="150px"><br/><h3>Bill Payments</h3></center></div><br/>'),J.document.write(e),J.document.write("</body></html>"),J.document.close(),J.focus(),J.window.print(),!0}},H=a(46),Q=a(51),Y=a(52);function K(e){return e&&""!==e?V()(e).format("MM/DD/YYYY"):e}function W(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(new Date),c=Object(O.a)(s,2),i=c[0],l=c[1],d=Object(n.useState)(new Date),j=Object(O.a)(d,2),h=j[0],m=j[1],g=Object(n.useState)(""),y=Object(O.a)(g,2),N=y[0],P=y[1],C=M().token,k=Object(n.useState)([]),S=Object(O.a)(k,2),T=S[0],L=S[1],A=Object(n.useState)(),D=Object(O.a)(A,2),G=D[0],U=D[1],V=Object(n.useState)({}),J=Object(O.a)(V,2),W=J[0],Z=J[1],_=Object(n.useRef)(null),X=Object(n.useRef)(null),$=function(){var e=Object(b.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(""),t={billAccountNumber:a,fromDate:K(i),toDate:K(h)},fetch(w.apiUrl+"/payment/history",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(C)},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){200===e.code?(L(e.details.rows),U(e.details.total),Z(e.details.totalAmount)):e.status&&401===e.status&&z.logout()})).catch((function(e){e.text?e.text().then((function(e){P(e)})):P("payment Error")}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),$();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){$()}),[]);var te=function(e,t){"toDate"===e?t<i?H.a.error("To Date should always be greater than equal to From Date.",{position:"top-center",heading:"Error"}):m(t):l(t)};return Object(v.jsxs)("div",{id:"payment-history",className:"container p-2",children:[Object(v.jsx)("div",{id:"filter",className:"pb-2",children:Object(v.jsxs)(x.a,{onSubmit:ee,children:[Object(v.jsxs)(I.a,{children:[Object(v.jsx)(p.a,{children:Object(v.jsxs)(x.a.Group,{children:[Object(v.jsx)(x.a.Label,{children:"Bill Account Number"}),Object(v.jsx)(x.a.Control,{type:"text",name:"billAccountNumber",value:a,onChange:function(e){return r(e.target.value)}})]})}),Object(v.jsx)(p.a,{children:Object(v.jsxs)(x.a.Group,{children:[Object(v.jsx)(x.a.Label,{children:"From Date"}),Object(v.jsx)(B.a,{id:"fromDate",selected:i,dateFormat:"MM/dd/yyyy",onChange:te.bind(this,"fromDate"),maxDate:new Date})]})}),Object(v.jsx)(p.a,{children:Object(v.jsxs)(x.a.Group,{children:[Object(v.jsx)(x.a.Label,{children:"To Date"}),Object(v.jsx)(B.a,{id:"toDate",selected:h,dateFormat:"MM/dd/yyyy",onChange:te.bind(this,"toDate"),maxDate:new Date})]})})]}),""!==N&&Object(v.jsx)("div",{className:"text-danger",children:N}),Object(v.jsxs)(f.a,{variant:"primary",type:"submit",children:[" ",Object(v.jsx)(Q.a,{icon:Y.c})," Search"]})]})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col",children:[T.length>0&&Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"clearfix",children:Object(v.jsxs)("div",{ref:X,className:"float-right",children:["Total number of transactions: ",Object(v.jsxs)("strong",{children:[G," "]}),Object(v.jsx)("br",{}),"Total amount: ",Object(v.jsx)("strong",{children:Object.keys(W).map((function(e,t){return Object(v.jsxs)("span",{children:[e," ",W[e]," ",t<Object.keys(W).length-1&&"; "]},t)}))})]})}),Object(v.jsx)("div",{className:"clearfix bg-primary",children:Object(v.jsxs)("div",{className:"toolbar float-right",children:[Object(v.jsx)(F.a,{placement:"top",overlay:Object(v.jsx)(E.a,{id:"tooltip-print",children:"Print"}),children:Object(v.jsx)(o.b,{to:"#",className:"text-white",onClick:function(e){var t=X.current.outerHTML,a=_.current.outerHTML;z.print(t+a+t)},children:Object(v.jsx)(Q.a,{icon:Y.b})})}),Object(v.jsx)(F.a,{placement:"top",overlay:Object(v.jsx)(E.a,{id:"tooltip-export",children:"Export to CSV"}),children:Object(v.jsx)(R.CSVLink,{data:T,headers:[{label:"Biller ID",key:"billerId"},{label:"Transaction ID",key:"fromAccount"},{label:"From Account",key:"fromAccount"},{label:"To Account",key:"toAccount"},{label:"Amount",key:"amountText"},{label:"Transaction Date",key:"date"},{label:"Comment",key:"comment"}],filename:"Bill Payments.csv",children:Object(v.jsx)(Q.a,{className:"text-white",icon:Y.a})})})]})})]}),Object(v.jsxs)(q.a,{striped:!0,bordered:!0,hover:!0,ref:_,children:[Object(v.jsx)("thead",{children:Object(v.jsx)("tr",{children:["Biller ID","Transaction ID","From Account","To Account","Amount","Transaction Date","Comment"].map((function(e,t){return Object(v.jsx)("th",{className:"text-center",children:Object(v.jsx)("div",{children:e})},t)}))})}),Object(v.jsx)("tbody",{children:T.length>0?T.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{className:"text-center",children:e.billerId}),Object(v.jsx)("td",{className:"text-center",children:e.transactionId}),Object(v.jsx)("td",{className:"text-center",children:e.fromAccount}),Object(v.jsx)("td",{className:"text-center",children:e.toAccount}),Object(v.jsxs)("td",{className:"text-right",children:[e.currency," ",e.amount]}),Object(v.jsx)("td",{className:"text-center",children:e.date}),Object(v.jsx)("td",{children:e.comment})]},e.id)})):Object(v.jsx)("tr",{children:Object(v.jsx)("td",{className:"text-center",colSpan:"7",children:"Bill Payments list is empty"})})})]}),T.length>0&&Object(v.jsxs)("div",{className:"text-right",children:["Total number of transactions: ",Object(v.jsxs)("strong",{children:[G," "]}),Object(v.jsx)("br",{}),"Total amount: ",Object(v.jsx)("strong",{children:Object.keys(W).map((function(e,t){return Object(v.jsxs)("span",{children:[e," ",W[e]," ",t<Object.keys(W).length-1&&"; "]},t)}))})]})]})})]})}function Z(){var e=Object(n.useState)({userName:"",email:""}),t=Object(O.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),c=Object(O.a)(s,2),i=c[0],l=c[1],d=Object(n.useState)(!1),j=Object(O.a)(d,2),y=j[0],N=j[1],P=Object(n.useState)(""),C=Object(O.a)(P,2),k=C[0],S=C[1],T=function(e){var t=e.target,a=t.id,n=t.value;r((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(h.a)({},a,n))}))},L=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),l(""),N(!0),fetch(w.apiUrl+"/forgotPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){if(console.log(e),!e.ok&&401===e.status)throw e;return e.json()})).then((function(e){N(!1),200===e.code?S(e.message):l(e.message)})).catch((function(e){N(!1),e.text?e.text().then((function(e){l(e)})):l("can not send request")}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(p.a,{md:{span:3,offset:3},className:"page-inner",children:""===k?Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:"Forgot Password"}),Object(v.jsxs)(x.a,{onSubmit:L,children:[Object(v.jsxs)(x.a.Group,{controlId:"userName",children:[Object(v.jsx)(x.a.Label,{children:"User"}),Object(v.jsx)(x.a.Control,{type:"text",name:"userName",placeholder:"Enter user",value:a.userName,onChange:T})]}),Object(v.jsxs)(x.a.Group,{controlId:"email",children:[Object(v.jsx)(x.a.Label,{children:"Email"}),Object(v.jsx)(x.a.Control,{type:"email",name:"email",placeholder:"Enter email",value:a.email,onChange:T})]}),""!==i&&Object(v.jsx)("div",{className:"text-danger",children:i}),!0===y?Object(v.jsxs)(f.a,{variant:"primary",block:!0,disabled:!0,children:[Object(v.jsx)(g.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(v.jsx)(f.a,{variant:"primary",type:"submit",block:!0,children:"Submit"})]})]}):Object(v.jsxs)("div",{children:[" ",k," ",Object(v.jsx)("p",{className:"pt-4",children:Object(v.jsx)(o.b,{className:"btn btn-outline-primary",to:"/login",children:"OK"})})]})})}function _(){var e=Object(i.h)().resetToken,t=Object(n.useState)({newPassword:"",confirmPassword:""}),a=Object(O.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),l=Object(O.a)(c,2),d=l[0],j=l[1],y=Object(n.useState)(!1),N=Object(O.a)(y,2),P=N[0],C=N[1],k=Object(n.useState)(""),S=Object(O.a)(k,2),T=S[0],L=S[1],A=function(e){var t=e.target,a=t.id,n=t.value;s((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(h.a)({},a,n))}))},D=function(){var t=Object(b.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),C(!0),r.newPassword!==r.confirmPassword?(j("Password is not match"),C(!1)):(n={token:e,newPassword:r.newPassword},j(""),fetch(w.apiUrl+"/resetPassword",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok&&401===e.status)throw e;return e.json()})).then((function(e){200===e.code?L(e.message):(j(e.message),C(!1))})).catch((function(e){C(!1),e.text?e.text().then((function(e){j(e)})):j("can not reset password")})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsx)(p.a,{md:{span:3,offset:3},className:"page-inner",children:""===T?Object(v.jsxs)("div",{children:[Object(v.jsx)("h3",{children:"Reset Password"}),Object(v.jsxs)(x.a,{onSubmit:D,children:[Object(v.jsxs)(x.a.Group,{controlId:"newPassword",className:"required",children:[Object(v.jsx)(x.a.Label,{children:"New Password"}),Object(v.jsx)(x.a.Control,{type:"password",placeholder:"Enter New Password",value:r.newPassword,onChange:A}),Object(v.jsx)(x.a.Text,{className:"text-muted",children:"Must be at least 8 characters long."})]}),Object(v.jsxs)(x.a.Group,{controlId:"confirmPassword",className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Confirmation"}),Object(v.jsx)(x.a.Control,{type:"password",value:r.confirmPassword,onChange:A,placeholder:"Confirm New Password"})]}),""!==d&&Object(v.jsx)("div",{className:"text-danger",children:d}),!0===P?Object(v.jsxs)(f.a,{variant:"primary",block:!0,disabled:!0,children:[Object(v.jsx)(g.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(v.jsx)(f.a,{variant:"primary",type:"submit",block:!0,children:"Submit"})]})]}):Object(v.jsxs)("div",{children:[" ",T," ",Object(v.jsx)("p",{children:Object(v.jsx)(o.b,{to:"/login",children:"Login"})})]})})}function X(){var e=M().token,t=Object(n.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),a=Object(O.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(""),o=Object(O.a)(c,2),l=o[0],d=o[1],j=Object(i.g)(),y=Object(n.useState)(!1),N=Object(O.a)(y,2),P=N[0],C=N[1],k=function(e){var t=e.target,a=t.id,n=t.value;s((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(h.a)({},a,n))}))},S=function(){var t=Object(b.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),C(!0),""!==r.password&&r.newPassword!==r.confirmPassword?(d("Password is not match"),C(!1)):(n={oldPassword:r.oldPassword,newPassword:r.newPassword},d(""),fetch(w.apiUrl+"/changePassword",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw e;return e.json()})).then((function(e){200===e.code?(H.a.success(e.message,{position:"top-center",heading:"Success",hideAfter:7}),C(!1),j.push("/payment")):(d(e.message),C(!1))})).catch((function(e){C(!1),e.text?e.text().then((function(e){d(e)})):d("can not change password")})));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)(p.a,{md:{span:3,offset:3},className:"page-inner",children:[Object(v.jsx)("h3",{children:"Change Password"}),Object(v.jsxs)(x.a,{onSubmit:S,children:[Object(v.jsxs)(x.a.Group,{controlId:"oldPassword",className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Old Password"}),Object(v.jsx)(x.a.Control,{type:"password",placeholder:"Enter Old Password",value:r.oldPassword,onChange:k})]}),Object(v.jsxs)(x.a.Group,{controlId:"newPassword",className:"required",children:[Object(v.jsx)(x.a.Label,{children:"New Password"}),Object(v.jsx)(x.a.Control,{type:"password",placeholder:"Enter New Password",value:r.newPassword,onChange:k}),Object(v.jsx)(x.a.Text,{className:"text-muted",children:"Must be at least 8 characters long."})]}),Object(v.jsxs)(x.a.Group,{controlId:"confirmPassword",className:"required",children:[Object(v.jsx)(x.a.Label,{children:"Confirmation"}),Object(v.jsx)(x.a.Control,{type:"password",value:r.confirmPassword,onChange:k,placeholder:"Confirm New Password"})]}),""!==l&&Object(v.jsx)("div",{className:"text-danger",children:l}),!0===P?Object(v.jsxs)(f.a,{variant:"primary",block:!0,disabled:!0,children:[Object(v.jsx)(g.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading..."]}):Object(v.jsx)(f.a,{variant:"primary",type:"submit",block:!0,children:"Submit"})]})]})}var $=function(){var e=M(),t=e.token,a=e.setToken,n="/"+w.webroot;return Object(v.jsxs)("div",{className:"app wrapper",children:[Object(v.jsxs)(l.a,{bg:"light",expand:"lg",children:[Object(v.jsx)(l.a.Brand,{href:n,children:"Third Party Billers "}),Object(v.jsx)(l.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(d.a.Item,{className:"ml-auto",children:t&&Object(v.jsx)(d.a.Link,{as:o.c,to:"/logout",onClick:z.logout,children:"Logout"})})]}),t?Object(v.jsx)("div",{className:"page-wrapper",children:Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{exact:!0,path:"/change-password",component:X}),Object(v.jsx)(i.b,{path:["/","/payment"],component:W})]})}):Object(v.jsxs)(i.d,{children:[Object(v.jsx)(i.b,{exact:!0,path:"/",render:function(){return Object(v.jsx)(i.a,{to:"/login"})}}),Object(v.jsx)(i.b,{path:"/login",children:Object(v.jsx)(y,{setToken:a})}),Object(v.jsx)(i.b,{path:"/enrollment",component:D}),Object(v.jsx)(i.b,{path:"/forgot-password",component:Z}),Object(v.jsx)(i.b,{path:"/reset-password/:resetToken",exact:!0,component:_})]})]})},ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,228)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};w.apiUrl=window.location.origin+"/"+w.webroot+"/api",c.a.render(Object(v.jsx)(o.a,{children:Object(v.jsx)($,{})}),document.getElementById("root")),ee()}},[[212,1,2]]]);
//# sourceMappingURL=main.f5d25a08.chunk.js.map